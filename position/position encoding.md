## 位置编码公式总结

### 绝对位置编码（APE）

- 仅取决于序列位置，与数据具体内容无关
- 由函数生成，无需训练
- 正弦/余弦有良好周期性、自然、包含相对位置关系
- 每个位置具有唯一指纹
- 维度越小，翻转越快

$$
PE(pos, 2i) = sin(pos / 10000^{2i / d})
$$

$$
PE(pos, 2i + 1) = cos(pos / 10000^{2i / d})
$$

主流实现方式：

$$
1 / 10000^{2i / d} = e ^ {-ln(10000) \cdot (2i / d)}
$$

### 相对位置编码（RPE）

只保留一定距离内的区别，若有2k + 1个距离，学习两种向量表达式（k、v）

### 旋转位置编码（RoPE）

- 远程衰减：相对距离增大时，注意力分数会自然衰减